// Verify Java version compatibility BEFORE loading any plugins
// This check must happen in settings.gradle to catch issues before buildscript classpath resolution
def javaVersion = JavaVersion.current()
def javaVersionMajor = javaVersion.majorVersion as Integer

if (javaVersionMajor < 17) {
    def errorMsg = """
    ╔═══════════════════════════════════════════════════════════════════════════════╗
    ║                           BUILD CONFIGURATION ERROR                            ║
    ╠═══════════════════════════════════════════════════════════════════════════════╣
    ║                                                                               ║
    ║  Your Java version is TOO OLD for this project!                              ║
    ║                                                                               ║
    ║  Detected: Java ${javaVersion} (major version ${javaVersionMajor})
    ║  Required: Java 17 or 21                                                     ║
    ║                                                                               ║
    ║  Android Gradle Plugin 8.7.2 requires Java 17 or higher.                     ║
    ║  Using Java ${javaVersionMajor} will cause "Unsupported class file major version" errors.
    ║                                                                               ║
    ║  SOLUTION:                                                                    ║
    ║  1. Install JDK 17 or JDK 21                                                 ║
    ║     • Download JDK 17: https://adoptium.net/temurin/releases/?version=17     ║
    ║     • Or download JDK 21: https://adoptium.net/temurin/releases/?version=21  ║
    ║                                                                               ║
    ║  2. Set JAVA_HOME environment variable to point to JDK 17 or 21              ║
    ║     • Linux/Mac: export JAVA_HOME=/path/to/jdk-17                            ║
    ║     • Windows: setx JAVA_HOME "C:\\Program Files\\Java\\jdk-17"               ║
    ║                                                                               ║
    ║  3. Verify the change: java -version                                         ║
    ║                                                                               ║
    ║  For more details, see ANDROID_BUILD.md                                      ║
    ║                                                                               ║
    ╚═══════════════════════════════════════════════════════════════════════════════╝
    """.stripIndent()
    
    throw new GradleException(errorMsg)
}

include ':app'
include ':capacitor-cordova-android-plugins'
project(':capacitor-cordova-android-plugins').projectDir = new File('./capacitor-cordova-android-plugins/')

apply from: 'capacitor.settings.gradle'